---
title: 主附明细表设计
category:
  - 数据库
---

# 主附明细表设计


在数据库设计里，**主表** 和 **附表**（有时也叫 **从表**、**子表**）的区分，核心是看**数据的主从关系**和**业务依赖方向**。
以你举的例子「订单表、商品表」来说，我们可以这样判断：

---

## 1️⃣ 区分原则

| 对比点      | 主表（Master Table）      | 附表（Slave Table / Detail Table） |
| -------- | --------------------- | ------------------------------ |
| **业务主体** | 记录业务的核心实体，主导数据        | 记录与主表有关的明细、附加信息                |
| **依赖关系** | 不依赖附表即可独立存在           | 必须依附主表，单独存在无意义                 |
| **数据关系** | 1 对 多（一个主表记录对应多条附表记录） | 多 对 1（多条附表记录对应同一个主表记录）         |
| **外键关系** | 主键通常被附表作为外键引用         | 包含主表的外键字段                      |
| **删除级联** | 删除主表记录时，通常需要删除对应附表记录  | 附表记录删除不一定影响主表                  |

---

## 2️⃣ 你的例子分析

* **订单表（order）**

  * 业务核心是订单，是交易的主体信息（订单号、下单时间、买家、总金额等）
  * 一个订单可以包含多个商品
  * → **主表**
* **商品表（product）**

  * 如果是**系统的商品信息表**（商品ID、名称、价格等），它本身是独立的商品库，不依赖订单，这种情况下它**不是附表**，而是一个独立主表，订单只是引用它。
  * 如果是**订单的商品明细表**（order\_item），记录订单里具体买了哪些商品、数量、价格等，这时它依赖订单表 → **附表**。

---

## 3️⃣ 举个更清晰的结构例子

```
order              ← 主表
 ├── order_item    ← 附表（订单明细）
product            ← 独立主表（商品库）
```

* `order_item` 通过 `order_id` 外键依赖 `order`
* `order_item` 中的 `product_id` 外键指向 `product`
* `product` 不依赖 `order`，自己就是一个业务主表

---

## 4️⃣ 记忆口诀

> **"离了主表还能活，就是主表；必须依附才能活，就是附表"**
> 业务主体主表，业务细节附表。

